global  _runtop
global  ncsv, cret, indir
global  _InitDynM
global  _InitHash
global  _freopen
global  __iob
global  _setbuf
global  _errBuf
global  _s_opt
global  _w_opt
global  _l_opt
global  _crfFile
global  _crfNameBuf
global  _fatalErr
global  _srcFileArg
global  _strcpy
global  _srcFile
global  _tmpFile
global  _rindex
global  _strcat
global  _crfFp
global  _fopen
global  _prWarning
global  _fprintf
global  _tmpFp
global  _s13_9d28
global  _s13_9d1b
psect   top
_runtop:
global csv
call csv
call    _InitDynM
call    _InitHash
ld      l,(ix+6)
ld      h,(ix+7)
dec     hl
ld      (ix+6),l
ld      (ix+7),h
ld      l,(ix+8)
ld      h,(ix+9)
inc     hl
inc     hl
ld      (ix+8),l
ld      (ix+9),h
jp      l21
l18:
ld      l,(ix+8)
ld      h,(ix+9)
ld      a,(hl)
inc     hl
ld      h,(hl)
ld      l,a
inc     hl
ld      a,(hl)
cp      67
jp      z,l33
cp      69
jp      z,l25
cp      76
jp      z,l31
cp      83
jp      z,l27
cp      87
jp      z,l29
cp      99
jp      z,l33
cp      101
jp      z,l25
cp      108
jp      z,l31
cp      115
jp      z,l27
cp      119
jp      z,l29
l20:
ld      l,(ix+6)
ld      h,(ix+7)
dec     hl
ld      (ix+6),l
ld      (ix+7),h
ld      l,(ix+8)
ld      h,(ix+9)
inc     hl
inc     hl
ld      (ix+8),l
ld      (ix+9),h
dec     hl
dec     hl
l21:
ld      a,(ix+6)
or      (ix+7)
jp      z,l19
ld      l,(ix+8)
ld      h,(ix+9)
ld      a,(hl)
inc     hl
ld      h,(hl)
ld      l,a
ld      a,(hl)
cp      45
jp      z,l18
l19:
ld      a,(ix+6)
or      (ix+7)
jp      z,l36
ld      hl,__iob
push    hl
ld      hl,29f
push    hl
ld      l,(ix+8)
ld      h,(ix+9)
ld      c,(hl)
inc     hl
ld      b,(hl)
push    bc
call    _freopen
pop     bc
pop     bc
pop     bc
ld      a,l
or      h
ld      l,(ix+8)
ld      h,(ix+9)
ld      c,(hl)
inc     hl
ld      b,(hl)
jp      nz,L3
push    bc
ld      hl,195
push    hl
call    _fatalErr
pop     bc
pop     bc
ld      l,(ix+8)
ld      h,(ix+9)
ld      c,(hl)
inc     hl
ld      b,(hl)
L3:
ld      (_srcFileArg),bc
ld      l,c
ld      h,b
push    hl
ld      hl,_srcFile
push    hl
call    _strcpy
pop     bc
pop     bc
ld      de,1
ld      l,(ix+6)
ld      h,(ix+7)
or      a
sbc     hl,de
jp      z,l38
ld      hl,__iob+8
push    hl
ld      hl,39f
push    hl
ld      l,(ix+8)
ld      h,(ix+9)
inc     hl
inc     hl
ld      c,(hl)
inc     hl
ld      b,(hl)
push    bc
call    _freopen
pop     bc
pop     bc
pop     bc
ld      a,l
or      h
jp      nz,l38
ld      l,(ix+8)
ld      h,(ix+9)
inc     hl
inc     hl
ld      c,(hl)
inc     hl
ld      b,(hl)
push    bc
ld      hl,195
push    hl
call    _fatalErr
pop     bc
pop     bc
l38:
ld      de,3
ld      l,(ix+6)
ld      h,(ix+7)
or      a
sbc     hl,de
jp      nz,l40
ld      l,(ix+8)
ld      h,(ix+9)
inc     hl
inc     hl
inc     hl
inc     hl
ld      c,(hl)
inc     hl
ld      b,(hl)
ld      (_tmpFile),bc
jp      l40
l25:
ld      hl,__iob+16
push    hl
ld      hl,19f
push    hl
ld      l,(ix+8)
ld      h,(ix+9)
ld      c,(hl)
inc     hl
ld      b,(hl)
inc     bc
inc     bc
push    bc
call    _freopen
pop     bc
pop     bc
ld      hl,_errBuf
ex      (sp),hl
ld      hl,__iob+16
push    hl
call    _setbuf
pop     bc
pop     bc
jp      l20
l27:
ld      a,1
ld      (_s_opt),a
jp      l20
l29:
ld      a,1
ld      (_w_opt),a
jp      l20
l31:
ld      a,1
ld      (_l_opt),a
jp      l20
l33:
ld      l,(ix+8)
ld      h,(ix+9)
ld      a,(hl)
inc     hl
ld      h,(hl)
ld      l,a
inc     hl
inc     hl
ld      a,(hl)
or      a
jp      z,l34
ld      l,(ix+8)
ld      h,(ix+9)
ld      c,(hl)
inc     hl
ld      b,(hl)
inc     bc
inc     bc
ld      (_crfFile),bc
jp      l20
l34:
ld      hl,_crfNameBuf
ld      (_crfFile),hl
jp      l20
l36:
ld      hl,49f
ld      (_srcFileArg),hl
push    hl
ld      hl,_srcFile
push    hl
call    _strcpy
pop     bc
pop     bc
l40:
ld      hl,(_crfFile)
ld      a,l
or      h
jp      z,l41
ld      a,(hl)
or      a
jp      nz,l42
ld      hl,_crfNameBuf
ld      (_crfFile),hl
ld      hl,_srcFile
push    hl
ld      hl,_crfNameBuf
push    hl
call    _strcpy
pop     bc
ld      l,46
ex      (sp),hl
ld      hl,_crfNameBuf
push    hl
call    _rindex
pop     bc
pop     bc
push    hl
pop     iy
ld      a,l
or      h
jp      z,l43
ld      hl,59f
push    hl
push    iy
call    _strcpy
pop     bc
pop     bc
jp      l42
l43:
ld      hl,69f
push    hl
ld      hl,_crfNameBuf
push    hl
call    _strcat
pop     bc
pop     bc
l42:
ld      hl,79f
push    hl
ld      hl,(_crfFile)
push    hl
call    _fopen
pop     bc
pop     bc
ld      (_crfFp),hl
ld      a,l
or      h
jp      nz,l45
ld      hl,(_crfFile)
push    hl
ld      hl,192
push    hl
call    _prWarning
pop     bc
pop     bc
jp      l41
l45:
ld      hl,_srcFile
push    hl
ld      hl,89f
push    hl
ld      hl,(_crfFp)
push    hl
call    _fprintf
pop     bc
pop     bc
pop     bc
l41:
ld      hl,99f
push    hl
ld      hl,(_tmpFile)
push    hl
call    _fopen
pop     bc
pop     bc
ld      (_tmpFp),hl
ld      a,l
or      h
jp      nz,l47
ld      hl,(_tmpFile)
push    hl
ld      hl,195
push    hl
call    _fatalErr
l47:
ld      a,116
ld      (_s13_9d28),a
ld      (_s13_9d1b),a
ld      a,8
ld      hl,_s13_9d28+11
ld      (hl),a
ld      hl,_s13_9d1b+11
ld      (hl),a
ld      de,0
ld      l,e
ld      h,d
ld      (_s13_9d1b+1),de
ld      (_s13_9d1b+3),hl
ld      de,1
ld      (_s13_9d28+1),de
ld      (_s13_9d28+3),hl
jp      cret
psect   data
19:
defb    97,0
29:
defb    114,0
39:
defb    119,0
49:
defb    40,115,116,100,105,110,41,0
59:
defb    46,99,114,102,0
69:
defb    46,99,114,102,0
79:
defb    97,0
89:
defb    126,37,115,10,0
99:
defb    119,0

